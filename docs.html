---
layout: docs
title: Documentation
description: Complete reference documentation for ActiveCanvas — installation, configuration, authentication, AI setup, media management, and more.
---

<h1>ActiveCanvas Documentation</h1>

<p>
  Complete reference for installing, configuring, and extending ActiveCanvas — the open-source CMS engine for Rails 8+.
</p>

<!-- ============================== INSTALLATION ============================== -->

<h2 id="installation">Installation</h2>

<p>Add ActiveCanvas to your Gemfile:</p>

<pre><code>gem "active_canvas"</code></pre>

<p>Then run the install generator:</p>

<pre><code>bundle install
bin/rails generate active_canvas:install
bin/rails db:migrate</code></pre>

<p>The interactive installer will:</p>

<ul>
  <li>Copy and run database migrations</li>
  <li>Create <code>config/initializers/active_canvas.rb</code> with configuration options</li>
  <li>Mount the engine in your routes (default: <code>/canvas</code>)</li>
  <li>Prompt you to choose a CSS framework (Tailwind, Bootstrap 5, or none)</li>
  <li>Optionally configure AI API keys</li>
</ul>

<p>Once the installer finishes, visit <code>/canvas/admin</code> to start building pages.</p>


<!-- ============================== QUICK START ============================== -->

<h2 id="quick-start">Quick Start</h2>

<p>Get a page live in five steps:</p>

<ol>
  <li><strong>Go to <code>/canvas/admin</code></strong> — open the admin dashboard</li>
  <li><strong>Create a Page Type</strong> — for example, "Landing Page" or "Blog Post"</li>
  <li><strong>Create a Page</strong> — give it a title and slug, then click <strong>Editor</strong> to open the visual builder</li>
  <li><strong>Build your page</strong> — drag blocks onto the canvas, use AI to generate content, upload images from the media library</li>
  <li><strong>Publish</strong> — your page is immediately live at <code>/canvas/your-slug</code></li>
</ol>


<!-- ============================== CONFIGURATION ============================== -->

<h2 id="configuration">Configuration</h2>

<p>
  All configuration lives in <code>config/initializers/active_canvas.rb</code>. Below is the complete reference of every option, grouped by category.
</p>

<h3>Authentication</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>authenticate_admin</code></td>
      <td><code>nil</code></td>
      <td>Method name (symbol), <code>:http_basic_auth</code>, or a lambda. Controls access to the admin interface.</td>
    </tr>
    <tr>
      <td><code>authenticate_public</code></td>
      <td><code>nil</code></td>
      <td>Same options as above. <code>nil</code> means public pages are accessible without authentication.</td>
    </tr>
    <tr>
      <td><code>current_user_method</code></td>
      <td><code>:current_user</code></td>
      <td>Method name used for version tracking and AI feature attribution.</td>
    </tr>
    <tr>
      <td><code>admin_parent_controller</code></td>
      <td><code>nil</code></td>
      <td>Set to a controller class name (string) to inherit authentication from your app.</td>
    </tr>
    <tr>
      <td><code>public_parent_controller</code></td>
      <td><code>nil</code></td>
      <td>Same as above, for public-facing page controllers.</td>
    </tr>
  </tbody>
</table>

<h3>CSS Framework</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>css_framework</code></td>
      <td><code>:tailwind</code></td>
      <td>Choose <code>:tailwind</code>, <code>:bootstrap5</code>, or <code>:none</code>.</td>
    </tr>
  </tbody>
</table>

<h3>Media Uploads</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>enable_uploads</code></td>
      <td><code>true</code></td>
      <td>Enable or disable file uploads entirely.</td>
    </tr>
    <tr>
      <td><code>max_upload_size</code></td>
      <td><code>10.megabytes</code></td>
      <td>Maximum allowed file size for uploads.</td>
    </tr>
    <tr>
      <td><code>allow_svg_uploads</code></td>
      <td><code>false</code></td>
      <td>SVG uploads are disabled by default for security.</td>
    </tr>
    <tr>
      <td><code>storage_service</code></td>
      <td><code>nil</code></td>
      <td>Active Storage service name. <code>nil</code> uses the default service.</td>
    </tr>
    <tr>
      <td><code>public_uploads</code></td>
      <td><code>false</code></td>
      <td><code>false</code> serves files via signed URLs; <code>true</code> uses public URLs.</td>
    </tr>
  </tbody>
</table>

<h3>Editor</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>enable_ai_features</code></td>
      <td><code>true</code></td>
      <td>Toggle AI content generation in the editor.</td>
    </tr>
    <tr>
      <td><code>enable_code_editor</code></td>
      <td><code>true</code></td>
      <td>Show the inline HTML/CSS code editor panel.</td>
    </tr>
    <tr>
      <td><code>enable_asset_manager</code></td>
      <td><code>true</code></td>
      <td>Show the media library inside the editor.</td>
    </tr>
    <tr>
      <td><code>autosave_interval</code></td>
      <td><code>60</code></td>
      <td>Seconds between auto-saves. Set to <code>0</code> to disable.</td>
    </tr>
  </tbody>
</table>

<h3>Pages</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>max_versions_per_page</code></td>
      <td><code>50</code></td>
      <td>Maximum version history entries per page. Set to <code>0</code> for unlimited.</td>
    </tr>
  </tbody>
</table>

<h3>Security</h3>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>sanitize_content</code></td>
      <td><code>true</code></td>
      <td>Sanitize page HTML content on save.</td>
    </tr>
    <tr>
      <td><code>ai_rate_limit_per_minute</code></td>
      <td><code>30</code></td>
      <td>Maximum AI requests allowed per minute per user.</td>
    </tr>
  </tbody>
</table>

<h3>Full Example</h3>

<pre><code># config/initializers/active_canvas.rb
ActiveCanvas.configure do |config|
  # Authentication
  config.authenticate_admin = :authenticate_user!
  config.authenticate_public = nil
  config.current_user_method = :current_user

  # CSS Framework
  config.css_framework = :tailwind

  # Media Uploads
  config.enable_uploads = true
  config.max_upload_size = 10.megabytes
  config.allow_svg_uploads = false
  config.storage_service = nil
  config.public_uploads = false

  # Editor
  config.enable_ai_features = true
  config.enable_code_editor = true
  config.enable_asset_manager = true
  config.autosave_interval = 60

  # Pages
  config.max_versions_per_page = 50

  # Security
  config.sanitize_content = true
  config.ai_rate_limit_per_minute = 30
end</code></pre>


<!-- ============================== AUTHENTICATION ============================== -->

<h2 id="authentication">Authentication</h2>

<p>
  <strong>The admin interface is open by default.</strong> Configure authentication before deploying to production. ActiveCanvas supports four approaches.
</p>

<h3>1. Devise</h3>

<p>If your app uses Devise, point <code>authenticate_admin</code> to the Devise helper method:</p>

<pre><code>ActiveCanvas.configure do |config|
  config.authenticate_admin = :authenticate_user!
end</code></pre>

<h3>2. Custom Controller</h3>

<p>Inherit from a controller that already handles authentication:</p>

<pre><code>ActiveCanvas.configure do |config|
  config.admin_parent_controller = "Admin::ApplicationController"
end</code></pre>

<p>
  All ActiveCanvas admin controllers will inherit from the specified controller, picking up its <code>before_action</code> filters, layout, and helper methods.
</p>

<h3>3. HTTP Basic Auth</h3>

<p>Simple password protection without a user model:</p>

<pre><code>ActiveCanvas.configure do |config|
  config.authenticate_admin = :http_basic_auth
  config.http_basic_user = "admin"
  config.http_basic_password = Rails.application.credentials.active_canvas_password
end</code></pre>

<h3>4. Lambda</h3>

<p>For completely custom logic, pass a lambda that runs in the controller context:</p>

<pre><code>ActiveCanvas.configure do |config|
  config.authenticate_admin = -> {
    unless current_user&.admin?
      redirect_to main_app.root_path, alert: "Access denied"
    end
  }
end</code></pre>


<!-- ============================== CSS FRAMEWORK ============================== -->

<h2 id="css-framework">CSS Framework</h2>

<p>ActiveCanvas supports three CSS framework options:</p>

<ul>
  <li><strong><code>:tailwind</code></strong> — Tailwind CSS v4. Uses the CDN in the editor for instant live preview. On save, compiles only the CSS classes used on that page. Public pages serve compiled CSS inline with zero CDN dependency.</li>
  <li><strong><code>:bootstrap5</code></strong> — Bootstrap 5 loaded via CDN in the editor and on public pages.</li>
  <li><strong><code>:none</code></strong> — No framework. Write vanilla CSS or bring your own.</li>
</ul>

<h3>Tailwind Setup</h3>

<p>For production-grade Tailwind compilation, add the <code>tailwindcss-ruby</code> gem:</p>

<pre><code>gem "tailwindcss-ruby", ">= 4.0"</code></pre>

<p>Then set the framework in your initializer:</p>

<pre><code>ActiveCanvas.configure do |config|
  config.css_framework = :tailwind
end</code></pre>

<p>
  That is all the setup required. CSS compiles automatically when pages are saved. If the gem is not installed, ActiveCanvas falls back to serving the Tailwind CDN on public pages.
</p>

<p>
  You can customize the Tailwind theme (colors, fonts, spacing) from the admin settings panel, and trigger a bulk recompile of all pages when the theme changes.
</p>


<!-- ============================== AI SETUP ============================== -->

<h2 id="ai-setup">AI Setup</h2>

<p>
  ActiveCanvas uses <a href="https://github.com/crmne/ruby_llm">RubyLLM</a> to provide AI-powered content generation directly in the editor. Supported capabilities:
</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Description</th>
      <th>Supported Models</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Chat</strong></td>
      <td>Generate and edit HTML content with streaming</td>
      <td>GPT-4o, Claude Sonnet 4, Claude 3.5 Haiku</td>
    </tr>
    <tr>
      <td><strong>Image Generation</strong></td>
      <td>Create images from text prompts</td>
      <td>DALL-E 3, GPT Image 1</td>
    </tr>
    <tr>
      <td><strong>Screenshot to Code</strong></td>
      <td>Upload a screenshot, get production-ready HTML/CSS</td>
      <td>GPT-4o, Claude Sonnet 4 (vision models)</td>
    </tr>
  </tbody>
</table>

<h3>API Keys</h3>

<p>Configure keys via environment variables or Rails credentials in your initializer:</p>

<pre><code># config/initializers/active_canvas.rb
Rails.application.config.after_initialize do
  # Via environment variables
  ActiveCanvas::Setting.ai_openai_api_key = ENV["OPENAI_API_KEY"]
  ActiveCanvas::Setting.ai_anthropic_api_key = ENV["ANTHROPIC_API_KEY"]
  ActiveCanvas::Setting.ai_openrouter_api_key = ENV["OPENROUTER_API_KEY"]

  # Or via Rails credentials
  credentials = Rails.application.credentials.active_canvas || {}
  ActiveCanvas::Setting.ai_openai_api_key = credentials[:openai_api_key]
end</code></pre>

<p>
  You can also configure API keys from the admin UI at <code>/canvas/admin/settings</code> (AI tab).
</p>

<h3>Sync Models</h3>

<p>After setting your API keys, sync the available models:</p>

<pre><code>bin/rails active_canvas:sync_models</code></pre>

<p>Or use the <strong>Sync Models</strong> button on the admin settings page. This fetches the list of available models from each configured provider.</p>

<h3>Server Timeout</h3>

<p>
  AI requests — especially image generation and screenshot-to-code — can take longer than typical web requests. If you run Puma in clustered mode, increase the worker timeout:
</p>

<pre><code># config/puma.rb
worker_timeout 180</code></pre>

<p>Or set the environment variable:</p>

<pre><code>PUMA_WORKER_TIMEOUT=180</code></pre>

<p>If you are behind a reverse proxy (Nginx, Apache), also increase its read timeout for the ActiveCanvas routes:</p>

<pre><code># Nginx example
location /canvas {
  proxy_read_timeout 180s;
  proxy_send_timeout 180s;
}</code></pre>


<!-- ============================== MEDIA ============================== -->

<h2 id="media">Media Library</h2>

<p>
  Upload and manage images directly from the admin dashboard or from within the editor's built-in asset manager.
</p>

<h3>Supported Formats</h3>

<ul>
  <li><strong>Images:</strong> JPEG, PNG, GIF, WebP, AVIF</li>
  <li><strong>Documents:</strong> PDF</li>
  <li><strong>Vector:</strong> SVG (disabled by default — enable with <code>config.allow_svg_uploads = true</code>)</li>
</ul>

<h3>Storage</h3>

<p>
  Media files are stored through Active Storage, so any backend works: local disk, Amazon S3, Google Cloud Storage, or Azure Blob Storage. Set <code>config.storage_service</code> to the name of your Active Storage service, or leave it as <code>nil</code> to use the default.
</p>

<h3>URL Mode</h3>

<ul>
  <li><code>config.public_uploads = false</code> — serves files via signed, expiring URLs (default)</li>
  <li><code>config.public_uploads = true</code> — serves files via permanent public URLs</li>
</ul>

<h3>File Size</h3>

<p>
  The maximum upload size defaults to 10 MB. Change it with:
</p>

<pre><code>config.max_upload_size = 25.megabytes</code></pre>


<!-- ============================== VERSIONING ============================== -->

<h2 id="versioning">Page Versioning</h2>

<p>
  Every content change creates a version automatically. View the version history from the page admin panel to see:
</p>

<ul>
  <li><strong>What changed</strong> — visual before/after diffs of the HTML content</li>
  <li><strong>Who made the change</strong> — attributed via your <code>current_user_method</code></li>
  <li><strong>When it was made</strong> — timestamped for auditing</li>
  <li><strong>Content size differences</strong> — see how much was added or removed</li>
</ul>

<p>Roll back to any previous version with a single click.</p>

<h3>Configuring Retention</h3>

<p>By default, ActiveCanvas keeps the last 50 versions per page. Adjust with:</p>

<pre><code>config.max_versions_per_page = 100  # keep more history
config.max_versions_per_page = 0    # unlimited (no pruning)</code></pre>

<p>
  When the limit is reached, the oldest versions are automatically pruned on each new save.
</p>


<!-- ============================== CUSTOMIZATION ============================== -->

<h2 id="customization">Customization</h2>

<h3>Mount Path</h3>

<p>By default the engine mounts at <code>/canvas</code>. Change it in your routes:</p>

<pre><code># config/routes.rb
mount ActiveCanvas::Engine => "/pages"    # or "/cms", "/blog", "/"</code></pre>

<h3>Override Views</h3>

<p>Copy any ActiveCanvas view into your application to customize its markup. Rails will prefer your local copy over the engine's default:</p>

<pre><code>app/views/active_canvas/pages/show.html.erb
app/views/active_canvas/admin/pages/index.html.erb
app/views/layouts/active_canvas/admin/application.html.erb</code></pre>

<h3>Extend Models</h3>

<p>Add validations, scopes, or methods to ActiveCanvas models using <code>class_eval</code>:</p>

<pre><code>ActiveCanvas::Page.class_eval do
  validates :content, presence: true

  def excerpt
    content.to_s.truncate(200)
  end
end</code></pre>

<p>
  Place model extensions in an initializer or in <code>config/initializers/active_canvas_extensions.rb</code> so they load on boot.
</p>


<!-- ============================== RAKE TASKS ============================== -->

<h2 id="rake-tasks">Rake Tasks</h2>

<p>ActiveCanvas ships with two rake tasks for managing AI model availability:</p>

<table>
  <thead>
    <tr>
      <th>Task</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>active_canvas:sync_models</code></td>
      <td>Fetches the latest available models from all configured AI providers (OpenAI, Anthropic, OpenRouter) and stores them in the database.</td>
    </tr>
    <tr>
      <td><code>active_canvas:list_models</code></td>
      <td>Lists all synced AI models with their provider, type, and status.</td>
    </tr>
  </tbody>
</table>

<h3>Usage</h3>

<pre><code>bin/rails active_canvas:sync_models    # Sync AI models from configured providers
bin/rails active_canvas:list_models    # List all synced AI models</code></pre>

<p>
  Run <code>sync_models</code> after adding or changing API keys, or periodically via a scheduled job to keep the model list up to date.
</p>
